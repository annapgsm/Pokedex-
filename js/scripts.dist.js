let pokemonRepository=function(){let e={normal:"#A8A77A",fire:"#EE8130",water:"#6390F0",electric:"#F7D02C",grass:"#7AC74C",ice:"#96D9D6",fighting:"#C22E28",poison:"#A33EA1",ground:"#E2BF65",flying:"#A98FF3",psychic:"#F95587",bug:"#A6B91A",rock:"#B6A136",ghost:"#735797",dragon:"#6F35FC",dark:"#705746",steel:"#B7B7CE",fairy:"#D685AD"},t=[];function o(e){"object"==typeof e&&"name"in e?t.push(e):console.log("pokemon is not correct")}function n(){return t}function i(e){return l(),fetch(e.detailsUrl).then(e=>e.json()).then(t=>{r(),e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types}).catch(e=>{r(),console.error(e)})}function a(e){pokemonRepository.loadDetails(e).then(function(){var t;t=e,$("#pokemonModalLabel").text(t.name),$("#modal-image").attr("src",t.imageUrl).attr("alt",t.name),$("#modal-height").text("Height: "+t.height),$("#modal-weight").text("Weight: "+t.weight),$("#modal-types").text("Types: "+t.types.map(e=>e.type.name).join(", ")),$("#pokemonModal").modal("show")})}function l(){let e=document.createElement("p");e.innerText="Loading...",e.classList.add("loading-message"),document.body.appendChild(e)}function r(){let e=document.querySelector(".loading-message");e&&e.remove()}return{getAll:n,add:o,filterByName:function e(o){let n=o.trim().toLowerCase();return t.filter(function(e){return e.name.toLowerCase().includes(n)})},addListItem:function t(o){let n=document.querySelector(".pokemon-list");i(o).then(function(){let t=document.createElement("div");t.classList.add("col-md-2","mb-4","d-flex","justify-content-center");let i=document.createElement("div");i.classList.add("card","w-100","text-center");let l=document.createElement("div");l.classList.add("card-body"),i.style.position="relative";let r=document.createElement("div");if(r.classList.add("type-badge"),Array.isArray(o.types)&&o.types.length>0){let s=o.types.map(e=>e.type.name);console.log("Pok\xe9mon types:",s);let c=e[s[0].toLowerCase()],d=s[1]?e[s[1].toLowerCase()]:null;console.log(`Mapped colors: [${c}], [${d}]`),1===s.length?r.style.backgroundColor=c||"#ccc":2===s.length&&(r.style.background=`linear-gradient(to right, ${c||"#ccc"} 50%, ${d||"#ddd"} 50%)`)}i.appendChild(r);let p=document.createElement("h5");p.classList.add("card-title","text-capitalize"),p.innerText=o.name,l.appendChild(p);let m=document.createElement("img");m.classList.add("card-img-bottom","img-fluid"),m.alt=o.name,m.src=o.imageUrl,i.style.cursor="pointer",i.addEventListener("click",function(){a(o)}),i.appendChild(l),i.appendChild(m),t.appendChild(i),n.appendChild(t)})},loadList:function e(){return l(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){let t={name:e.name,detailsUrl:e.url};o(t),console.log(t)})}).catch(function(e){r(),console.error(e)})},loadDetails:i,showDetails:a,showLoadingMessage:l,hideLoadingMessage:r}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)}),pokemonRepository.hideLoadingMessage()}),$(document).ready(function(){$("#pokemon-search-form").on("submit",function(e){e.preventDefault(),console.log("Intercepted submit on #pokemon-search-form");let t=$('#pokemon-search-form input[type="search"]').val().toLowerCase(),o=pokemonRepository.filterByName(t);$(".pokemon-list").empty(),o.forEach(function(e){pokemonRepository.addListItem(e)})})}),window.addEventListener("scroll",function(){let e=document.getElementById("scrollToTopBtn");window.scrollY>250?e.classList.add("show"):e.classList.remove("show")}),document.getElementById("scrollToTopBtn").addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});